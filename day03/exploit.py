from bs4 import BeautifulSoup
from os import system
trentons_script = '''hacked = function() {
                                alert('hacked');
                            }
                            window.addEventListener('load', 
                              function() { 
                                var f = document.querySelector("form");
                                f.setAttribute("onsubmit", "hacked()");
                              },
                              false);'''


with open("config_files/evilcorp.html") as f:
    src = f.read()

soup = BeautifulSoup(src, "lxml")
soup.title.string = "Evil Corp - Stealing your money every day"

name = soup.body.find('span', 'name').text
hacked_info = soup.new_tag('h1').string = name + ', you are hacked'
soup.body.insert(1, hacked_info)

trentons_script_wrap = soup.new_tag('script')
trentons_script_wrap.string = trentons_script
soup.body.insert(1, trentons_script_wrap)

soup.find('a', href="https://mrrobot.fandom.com/wiki/E_Corp").string = "Fsociety"
soup.find('a', href="https://mrrobot.fandom.com/wiki/E_Corp")['href'] = "https://mrrobot.fandom.com/wiki/Fsociety"

with open("evilcorp_hacked.html", 'w') as f:
    f.write(soup.prettify())

